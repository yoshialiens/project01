<div id="notice"><%= notice %></div>

<h1>Twiittttter</h1>

<ul>
 <% @posts.each do |post| %>
 <li id="post_<%= post.id %>">
 	<%= link_to post.title, post_path(post) %> (<%= post.comments.size %>)
 	<%= link_to 'edit', edit_post_path(post) %>
 	<%= link_to 'delete', post, :confirm => 'sure?',
 								:method => :delete,
 								:remote => true %>
 </li>
 <% end %>
</ul>

<%= link_to 'home', posts_path %> | <%= link_to 'new', new_post_path %>

<div id='user_nav'>
  <% if user_signed_in? %>
    Signed in as <%= current_user.email %>. <%= link_to "Sign out", destroy_user_session_path, :method => :delete %>
  <% else %>
    <%= link_to "Sign up", new_user_registration_path %> or
    <%= link_to "Sign in", new_user_session_path %>
  <% end %>
</div>

<script>
$(function() {
	setTimeout(function() {
		$('#notice').fadeOut("slow");
	}, 800);

	$('a[data-method="delete"]').on('ajax:success',function(e, data,status, xhr) {
		$('#post_'+data.post.id).fadeOut("slow");
	})
});
</script>